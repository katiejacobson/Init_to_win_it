!function(){"use strict";class t{constructor(t,e){this._data=t,this._cardSelector=e,this._email=t.email,this._location=t.location,this._desc=t.text,this._link=t.link,this._cardTemplate=e}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".donation-card").cloneNode(!0)}createCard(){return this._cardElement=this._getTemplate(),this._cardEmail=this._cardElement.querySelector(".donation-card__email"),this._cardLocation=this._cardElement.querySelector(".donation-card__location"),this._cardDonation=this._cardElement.querySelector(".donation-card__description"),this._cardImage=this._cardElement.querySelector(".donation-card__image"),this._cardEmail.textContent=`Email: ${this._email}`,this._cardLocation.textContent=`Location: ${this._location}`,this._cardDonation.textContent=`Donation: ${this._desc}`,this._cardImage.src=this._link,this._cardImage.alt=this._desc,this._cardElement}}class e{constructor(t,e){this._renderer=t,this._container=document.querySelector(e)}renderItems(t){t.forEach((t=>{this.addItem(t)}))}addItem(t){const e=this._renderer(t);this._container.prepend(e)}clearItems(){if(this._cards=this._container.querySelectorAll(".charity-card"),null!==this._cards)for(var t=0;t<this._cards.length;t++)this._cards[t].remove()}}class r{constructor(t,e){this._data=t,this._name=t.name,this._profileUrl=t.profileUrl,this._logoUrl=t.logoUrl,this._location=t.location,this._cardSelector=e}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".charity-card").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._element.querySelector(".charity-card__name").textContent=this._name,this._element.querySelector(".charity-card__location").textContent=this._location,this._element.querySelector(".charity-card__url").href=this._profileUrl,this._element}}class s{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e),this._popupCloseButton=this._popupElement.querySelector(".popup__close-button"),this._closeByEscape=t=>{"Escape"===t.key&&this.close()}}open(){this._popupElement.classList.add("donation__popup_opened"),document.addEventListener("keydown",this._closeByEscape)}close(){this._popupElement.classList.remove("donation__popup_opened"),document.removeEventListener("keydown",this._closeByEscape)}setEventListeners(){this._popupElement.addEventListener("click",(t=>{t.target!==this._popupCloseButton&&t.target!==this._popupElement||this.close()}))}}const o=document.querySelector(".donate__button"),i=document.querySelector(".charities__container"),n=new class{constructor(t){let{baseUrl:e,apiKey:r}=t;this._baseUrl=e,this._apiKey=r}_request(t){return fetch(t).then(this.renderResult)}renderResult(t){return t.ok?t.json():Promise.reject(`'Error:' ${t.status}`)}getInfo(t){return fetch(`${this._baseUrl}search/causes=${t}?apiKey=${this._apiKey}`).then(this.renderResult)}}({baseUrl:"https://partners.every.org/v0.2/",apiKey:"pk_live_51295acbffe33d27ac313b33feb97d63"});new class{constructor(t,e){this._formElement=document.querySelector(t),this._form=this._formElement.querySelector(".charities__form"),this._formBtn=this._formElement.querySelector(".charities__button"),this._input=this._formElement.querySelector(".charities__input"),this._handleFormSubmit=e}_getCause(){for(var t,e=document.getElementsByName("cause"),r=0;r<e.length;r++)e[r].checked&&(t=e[r].value);return t}setEventListeners(){this._formBtn.addEventListener("click",(t=>{t.preventDefault();const e=this._getCause();this._handleFormSubmit(e),this._form.reset()}))}}(".charities",(function(t){a.clearItems(),n.getInfo(t).then((t=>{a.renderItems(t.nonprofits),i.classList.add("charities__container_active")})).catch(console.error)})).setEventListeners();const a=new e((function(t){return new r(t,"#charity-card-template").generateCard()}),"#charities-container"),c=new class extends s{constructor(t,e){super({popupSelector:e}),this._donationForm=this._popupElement.querySelector(".donation-form"),this._formSubmit=t}_getInputValues(){const t={};return this._donationForm.querySelectorAll(".donation-form__input").forEach((e=>{t[e.name]=e.value})),t}close(){this._donationForm.reset(),super.close()}setEventListeners(){this._donationForm.addEventListener("submit",(t=>{t.preventDefault();const e=this._getInputValues();this._formSubmit(e),this.close()})),super.setEventListeners()}}((t=>{l.addItem(t)}),".donation__popup"),l=new e((e=>new t(e,"#donation-card__template").createCard()),".donations__gallery");c.setEventListeners(),o.addEventListener("click",(()=>{c.open(),h.resetValidation()}));const _=document.querySelector("#donation-form"),h=new class{constructor(t,e){this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=e}_showInputError(t,e){const r=document.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),r.textContent=e,r.classList.add(this._errorClass)}_hideInputError(t){const e=document.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}resetValidation(){this.toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}disableSubmitButton=()=>{const t=this._formElement.querySelector(this._submitButtonSelector);t.classList.add(this._inactiveButtonClass),t.disabled=!0};_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}({formSelector:".donation-form",inputSelector:".donation-form__input",submitButtonSelector:".donation-form__submit-button",inactiveButtonClass:"donation-form__submit-button_disabled",inputErrorClass:"donation-form__input_type_error",errorClass:"donation-form__error_visible"},_);h.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUtnSixvQkFBb0JMLEdBQ3pCM0ksS0FBS3VKLG1CQUFtQixHQUN4QixHQUVOLENBRUFRLGdCQUFBQSxHQUNFL0osS0FBSzZGLGFBQWExQixpQkFBaUIsVUFBV04sSUFDNUNBLEVBQUkwQyxnQkFBZ0IsSUFFdEJ2RyxLQUFLNEosb0JBQ1AsR0x2RjBDLENBQzFDN0IsYUFBYyxpQkFDZEUsY0FBZSx3QkFDZkUscUJBQXNCLGdDQUN0QkUsb0JBQXFCLHdDQUNyQkUsZ0JBQWlCLGtDQUNqQkUsV0FBWSxnQ0M0RFpiLEdBRUZGLEVBQXNCcUMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9jb21wb25lbnRzL0RvbmF0aW9uQ2FyZC5qcyIsIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vY29kZV9qYW0vLi9zcmMvY29tcG9uZW50cy9DaGFyaXR5Q2FyZC5qcyIsIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL2NvZGVfamFtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9jb21wb25lbnRzL0NoYXJpdGllcy5qcyIsIndlYnBhY2s6Ly9jb2RlX2phbS8uL3NyYy9jb21wb25lbnRzL0RvbmF0aW9uc1BvcHVwLmpzIiwid2VicGFjazovL2NvZGVfamFtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBEb25hdGlvbkNhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkVGVtcGxhdGUpIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkVGVtcGxhdGU7XG4gICAgdGhpcy5fZW1haWwgPSBkYXRhLmVtYWlsO1xuICAgIHRoaXMuX2xvY2F0aW9uID0gZGF0YS5sb2NhdGlvbjtcbiAgICB0aGlzLl9kZXNjID0gZGF0YS50ZXh0O1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IF9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmRvbmF0aW9uLWNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gX2NhcmRFbGVtZW50O1xuICB9XG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRFbWFpbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZG9uYXRpb24tY2FyZF9fZW1haWxcIik7XG4gICAgdGhpcy5fY2FyZExvY2F0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmRvbmF0aW9uLWNhcmRfX2xvY2F0aW9uXCJcbiAgICApO1xuICAgIHRoaXMuX2NhcmREb25hdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5kb25hdGlvbi1jYXJkX19kZXNjcmlwdGlvblwiXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvbmF0aW9uLWNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRFbWFpbC50ZXh0Q29udGVudCA9IGBFbWFpbDogJHt0aGlzLl9lbWFpbH1gO1xuICAgIHRoaXMuX2NhcmRMb2NhdGlvbi50ZXh0Q29udGVudCA9IGBMb2NhdGlvbjogJHt0aGlzLl9sb2NhdGlvbn1gO1xuICAgIHRoaXMuX2NhcmREb25hdGlvbi50ZXh0Q29udGVudCA9IGBEb25hdGlvbjogJHt0aGlzLl9kZXNjfWA7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fZGVzYztcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgZWxlbWVudFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIGNvbnN0IG5ld0NhcmQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChuZXdDYXJkKTtcbiAgfVxuXG4gIGNsZWFySXRlbXMoKSB7XG4gICAgdGhpcy5fY2FyZHMgPSB0aGlzLl9jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5jaGFyaXR5LWNhcmRcIik7XG4gICAgaWYgKHRoaXMuX2NhcmRzICE9PSBudWxsKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NhcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2NhcmRzW2ldLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcml0eUNhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVVcmwgPSBkYXRhLnByb2ZpbGVVcmw7XG4gICAgdGhpcy5fbG9nb1VybCA9IGRhdGEubG9nb1VybDtcbiAgICB0aGlzLl9sb2NhdGlvbiA9IGRhdGEubG9jYXRpb247XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IF9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXJpdHktY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBfY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcml0eS1jYXJkX19uYW1lXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcml0eS1jYXJkX19sb2NhdGlvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9sb2NhdGlvbjtcbiAgICAvLyB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcml0eS1jYXJkX19sb2dvXCIpLnNyYyA9IHRoaXMuX2xvZ29Vcmw7XG4gICAgLy8gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXJpdHktY2FyZF9fbG9nb1wiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFyaXR5LWNhcmRfX3VybFwiKS5ocmVmID0gdGhpcy5fcHJvZmlsZVVybDtcblxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fY2xvc2VCeUVzY2FwZSA9IChldnQpID0+IHtcbiAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkb25hdGlvbl9fcG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2NhcGUpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZG9uYXRpb25fX3BvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjYXBlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cENsb3NlQnV0dG9uIHx8XG4gICAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGRvbmF0aW9uRm9ybVZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIuZG9uYXRpb24tZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5kb25hdGlvbi1mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZG9uYXRpb24tZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImRvbmF0aW9uLWZvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImRvbmF0aW9uLWZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJkb25hdGlvbi1mb3JtX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY2hhcml0aWVzRm9ybVZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIuY2hhcml0aWVzX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmNoYXJpdGllc19faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmNoYXJpdGllc19fYnV0dG9uXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJjaGFyaXRpZXMtZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImNoYXJpdGllcy1mb3JtX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiLy8gSU1QT1JUU1xuaW1wb3J0IERvbmF0aW9uQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9Eb25hdGlvbkNhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgQ2hhcml0aWVzIGZyb20gXCIuLi9jb21wb25lbnRzL0NoYXJpdGllcy5qc1wiO1xuaW1wb3J0IENoYXJpdHlDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NoYXJpdHlDYXJkLmpzXCI7XG5pbXBvcnQgRG9uYXRpb25zUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvRG9uYXRpb25zUG9wdXAuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBkb25hdGlvbkZvcm1WYWxpZGF0aW9uQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbmNvbnN0IGRvbmF0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZG9uYXRlX19idXR0b25cIik7XG5jb25zdCBjaGFyaXRpZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXJpdGllc19fY29udGFpbmVyXCIpO1xuLy9BUEkgSU5TVEFOVElBVElPTlxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9wYXJ0bmVycy5ldmVyeS5vcmcvdjAuMi9cIixcbiAgYXBpS2V5OiBcInBrX2xpdmVfNTEyOTVhY2JmZmUzM2QyN2FjMzEzYjMzZmViOTdkNjNcIixcbn0pO1xuXG4vL0NIQVJJVFkgRk9STVxuY29uc3QgY2hhcml0eUZvcm0gPSBuZXcgQ2hhcml0aWVzKFwiLmNoYXJpdGllc1wiLCBoYW5kbGVDaGFyaXR5Rm9ybVN1Ym1pdCk7XG5jaGFyaXR5Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVDaGFyaXR5Rm9ybVN1Ym1pdChkYXRhKSB7XG4gIGNoYXJpdHlDYXJkTGlzdC5jbGVhckl0ZW1zKCk7XG4gIGFwaVxuICAgIC5nZXRJbmZvKGRhdGEpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY2hhcml0eUNhcmRMaXN0LnJlbmRlckl0ZW1zKHJlcy5ub25wcm9maXRzKTtcbiAgICAgIGNoYXJpdGllc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiY2hhcml0aWVzX19jb250YWluZXJfYWN0aXZlXCIpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDaGFyaXR5Q2FyZChkYXRhKSB7XG4gIGNvbnN0IGNoYXJpdHlDYXJkID0gbmV3IENoYXJpdHlDYXJkKGRhdGEsIFwiI2NoYXJpdHktY2FyZC10ZW1wbGF0ZVwiKTtcbiAgcmV0dXJuIGNoYXJpdHlDYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5jb25zdCBjaGFyaXR5Q2FyZExpc3QgPSBuZXcgU2VjdGlvbihjcmVhdGVDaGFyaXR5Q2FyZCwgXCIjY2hhcml0aWVzLWNvbnRhaW5lclwiKTtcblxuLy8gRE9OQVRJT05GT1JNXG5jb25zdCBjcmVhdGVEb25hdGlvbkNhcmQgPSAoY2FyZERhdGEpID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBEb25hdGlvbkNhcmQoY2FyZERhdGEsIFwiI2RvbmF0aW9uLWNhcmRfX3RlbXBsYXRlXCIpO1xuICByZXR1cm4gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XG59O1xuY29uc3QgZG9uYXRpb25SZW5kZXJlciA9IChpbnB1dERhdGEpID0+IHtcbiAgc2VjdGlvbkRvbmF0aW9ucy5hZGRJdGVtKGlucHV0RGF0YSk7XG59O1xuY29uc3QgZG9uYXRpb25zUG9wdXAgPSBuZXcgRG9uYXRpb25zUG9wdXAoZG9uYXRpb25SZW5kZXJlciwgXCIuZG9uYXRpb25fX3BvcHVwXCIpO1xuY29uc3Qgc2VjdGlvbkRvbmF0aW9ucyA9IG5ldyBTZWN0aW9uKGNyZWF0ZURvbmF0aW9uQ2FyZCwgXCIuZG9uYXRpb25zX19nYWxsZXJ5XCIpO1xuXG4vLyBDTEFTUyBNRVRIT0QgQ0FMTFNcbmRvbmF0aW9uc1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEVWRU5UIExJU1RFTkVSU1xuZG9uYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGRvbmF0aW9uc1BvcHVwLm9wZW4oKTtcbiAgZG9uYXRpb25Gb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbi8vRk9STSBWQUxJREFUSU9OXG5jb25zdCBkb25hdGlvbkZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkb25hdGlvbi1mb3JtXCIpO1xuXG5jb25zdCBkb25hdGlvbkZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRpb24oXG4gIGRvbmF0aW9uRm9ybVZhbGlkYXRpb25Db25maWcsXG4gIGRvbmF0aW9uRm9ybUVsZW1lbnRcbik7XG5kb25hdGlvbkZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBhcGlLZXkgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2FwaUtleSA9IGFwaUtleTtcbiAgfVxuXG4gIF9yZXF1ZXN0KHVybCkge1xuICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4odGhpcy5yZW5kZXJSZXN1bHQpO1xuICB9XG5cbiAgcmVuZGVyUmVzdWx0KHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYCdFcnJvcjonICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICAvLyAgIGdldEluZm8oY2l0eSkge1xuICAvLyAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vYXBpL29yZ2FuaXphdGlvbnMvc2VhcmNoLzoke2NpdHl9YCwge1xuICAvLyAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAvLyAgICAgfSk7XG4gIC8vICAgfVxuXG4gIGdldEluZm8oY2F1c2UpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICBgJHt0aGlzLl9iYXNlVXJsfXNlYXJjaC9jYXVzZXM9JHtjYXVzZX0/YXBpS2V5PSR7dGhpcy5fYXBpS2V5fWBcbiAgICApLnRoZW4odGhpcy5yZW5kZXJSZXN1bHQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFyaXRpZXMge1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtRWxlbWVudCk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcml0aWVzX19mb3JtXCIpO1xuICAgIHRoaXMuX2Zvcm1CdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXJpdGllc19fYnV0dG9uXCIpO1xuICAgIHRoaXMuX2lucHV0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFyaXRpZXNfX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldENhdXNlKCkge1xuICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKFwiY2F1c2VcIik7XG4gICAgdmFyIGNhdXNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChlbGVtZW50c1tpXS5jaGVja2VkKSB7XG4gICAgICAgIGNhdXNlID0gZWxlbWVudHNbaV0udmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYXVzZTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3Qgc2VsZWN0ZWRDYXVzZSA9IHRoaXMuX2dldENhdXNlKCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHNlbGVjdGVkQ2F1c2UpO1xuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERvbmF0aW9uc1BvcHVwIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihmb3JtU3VibWl0LCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2RvbmF0aW9uRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvbmF0aW9uLWZvcm1cIik7XG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRzID0gdGhpcy5fZG9uYXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICBcIi5kb25hdGlvbi1mb3JtX19pbnB1dFwiXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9kb25hdGlvbkZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2RvbmF0aW9uRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5fZm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRpb24ge1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IF9lcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBfZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIF9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBfZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIF9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbiA9ICgpID0+IHtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJEb25hdGlvbkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkVGVtcGxhdGUiLCJ0aGlzIiwiX2RhdGEiLCJfY2FyZFNlbGVjdG9yIiwiX2VtYWlsIiwiZW1haWwiLCJfbG9jYXRpb24iLCJsb2NhdGlvbiIsIl9kZXNjIiwidGV4dCIsIl9saW5rIiwibGluayIsIl9jYXJkVGVtcGxhdGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY3JlYXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsIl9jYXJkRW1haWwiLCJfY2FyZExvY2F0aW9uIiwiX2NhcmREb25hdGlvbiIsIl9jYXJkSW1hZ2UiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImVsZW1lbnRTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiZm9yRWFjaCIsIml0ZW0iLCJhZGRJdGVtIiwibmV3Q2FyZCIsInByZXBlbmQiLCJjbGVhckl0ZW1zIiwiX2NhcmRzIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJDaGFyaXR5Q2FyZCIsImNhcmRTZWxlY3RvciIsIl9uYW1lIiwibmFtZSIsIl9wcm9maWxlVXJsIiwicHJvZmlsZVVybCIsIl9sb2dvVXJsIiwibG9nb1VybCIsImdlbmVyYXRlQ2FyZCIsIl9lbGVtZW50IiwiaHJlZiIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfY2xvc2VCeUVzY2FwZSIsImV2dCIsImtleSIsImNsb3NlIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJkb25hdGVCdXR0b24iLCJjaGFyaXRpZXNDb250YWluZXIiLCJhcGkiLCJiYXNlVXJsIiwiYXBpS2V5IiwiX2Jhc2VVcmwiLCJfYXBpS2V5IiwiX3JlcXVlc3QiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZW5kZXJSZXN1bHQiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5mbyIsImNhdXNlIiwiZm9ybUVsZW1lbnQiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1FbGVtZW50IiwiX2Zvcm0iLCJfZm9ybUJ0biIsIl9pbnB1dCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldENhdXNlIiwiZWxlbWVudHMiLCJnZXRFbGVtZW50c0J5TmFtZSIsImNoZWNrZWQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0Iiwic2VsZWN0ZWRDYXVzZSIsInJlc2V0IiwiY2hhcml0eUNhcmRMaXN0Iiwibm9ucHJvZml0cyIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZG9uYXRpb25zUG9wdXAiLCJmb3JtU3VibWl0Iiwic3VwZXIiLCJfZG9uYXRpb25Gb3JtIiwiX2Zvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwiaW5wdXREYXRhIiwic2VjdGlvbkRvbmF0aW9ucyIsImNhcmREYXRhIiwiZG9uYXRpb25Gb3JtVmFsaWRhdG9yIiwicmVzZXRWYWxpZGF0aW9uIiwiZG9uYXRpb25Gb3JtRWxlbWVudCIsInNldHRpbmdzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsIl9lcnJvckVsZW1lbnQiLCJpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsInNvbWUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiYnV0dG9uRWxlbWVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9